<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
        <script src="{{ url_for('static', filename='js/header.js') }}" defer></script>
        <link rel="icon" type="image/svg" href="{{ url_for('static', filename='favicon.svg') }}">
        <title>{% block title %}Devon RFU Colts{% endblock %} - Devon RFU Colts</title>
    </head>

    <body class="{% block body_class %}{% endblock %}">

    <header id="main-header">
        <div id="head-logo-wrap">
            <a href="/"><img src="{{ url_for('static', filename='favicon.svg') }}" alt="Devon RFU Logo" id="head-logo"></a>
        </div>

        <nav id="main-nav-buttons">
            <a class="nav-buttons" href="/">Home</a>
            <a class="nav-buttons" href="/overview">Overview</a>
            <a class="nav-buttons" href="/leaderboards">Leaderboards</a>
            <a class="nav-buttons" href="/fixtures-results">Fixtures & Results</a>
            {% if current_user.is_authenticated %}
                <a class="nav-buttons" href="/tables">Tables</a>
                {% if current_user.is_superadmin() or (current_user.access_level|int >= 2) %}
                    <a class="nav-buttons" href="/admin">Admin</a>
                {% else %}
                    <a class="nav-buttons" href="/dashboard">Dashboard</a>
                {% endif %}
            {% endif %}
        </nav>
            
        <nav id="account-buttons">
            {% if current_user.is_authenticated %}
                <a class="account-buttons" id="log-in-button" href="{{ url_for('logout') }}">Sign Out</a>
            {% else %}
                <a class="account-buttons" id="log-in-button" href="/log-in">Log In</a>
                <a class="account-buttons" id="sign-up-button" href="/sign-up">Sign Up</a>
            {% endif %}
        </nav>
    </header>

    <main>
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        <div id="flashes">
                            {% for category, msg in messages %}
                                <div class="flash {{ category }}">{{ msg }}</div>
                            {% endfor %}
                        </div>
                    {% endif %}
                {% endwith %}
        {% block content %}
        {% endblock %}
    </main>

    <footer>
        <div id="footer-content-wrap">
            <div id="footer-section-1">
            <div id="footer-sect-1-fract-1">
                    <img src="{{ url_for('static', filename='favicon.svg') }}" alt="Devon RFU Logo" id="footer-logo">
            </div> 
            
            <div id="footer-sect-1-fract-2">
                    <h2>GET IN TOUCH</h2>
                    <a href="mailto:enquiries@devonrfu.com" class="alt-links">Send Message</a>
            </div>

            <div id="footer-sect-1-fract-3">
                    <h2>QUICK LINKS</h2>
                    <a href="/overview" class="alt-links">Overview</a>
                    <a href="/leaderboards" class="alt-links">Leaderboards</a>
                    <a href="/news" class="alt-links">News</a>
                    {% if current_user.is_authenticated %}
                        {% if current_user.is_superadmin() or (current_user.access_level|int >= 2) %}
                            <a href="/admin" class="alt-links">Admin</a>
                        {% else %}
                            <a href="/dashboard" class="alt-links">Dashboard</a>
                        {% endif %}
                    {% endif %}
            </div>

            <div id="footer-sect-1-fract-4">
                    <h2>FOLLOW THE ACTION</h2>
                    <p>Stay updated with match action, team news & more. Join the Devon Rugby community!</p>
                    <a class="links" href="https://facebook.com/devonrfu" target="_blank" rel="noopener noreferrer"><img src="{{ url_for('static', filename='facebook-icon.svg') }}" alt="Facebook Icon" id="Facebook-icon"></a>
                    <a class="links" href="https://twitter.com/devonrfu" target="_blank" rel="noopener noreferrer"><img src="{{ url_for('static', filename='x-icon.svg') }}" alt="X Icon" id="x-icon"></a>
                    <a class="links" href="https://instagram.com/devonrfu" target="_blank" rel="noopener noreferrer"><img src="{{ url_for('static', filename='instagram-icon.svg') }}" alt="Instagram Icon" id="instagram-icon"></a>
            </div>
            </div>

            <div id="footer-section-2">
                <div id="footer-sect-2-fract-1">
                    <p>Copyright &copy; 2025 Devon RFU | All rights reserved.</p>
                    <p><a href="/privacy-policy" class="links">Privacy Policy</a>|<a href="/cookie-policy" class="links">Cookie Policy</a></p>
                </div>

                <div id="footer-sect-2-fract-2">
                    <p>Website Design by <a href="https://barnaby-a.github.io/" class="links" id="barnaby-link">Barnaby Adams</a></p>
                </div>
            </div>
        </div>
    </footer>

        <div id="cookie-consent" role="dialog" aria-live="polite" aria-label="Cookie consent">
                <div class="cookie-inner">
                        <p>We use cookies to improve your experience. By continuing to use the site or by clicking "Accept", you agree to our <a href="/cookie-policy">Cookie Policy</a> and <a href="/privacy-policy">Privacy Policy</a>.</p>
                        <div class="cookie-actions">
                                <button id="cookie-accept" class="cookie-btn primary">Accept</button>
                                <button id="cookie-manage" class="cookie-btn link" type="button">Manage</button>
                        </div>
                </div>
        </div>

        <div id="cookie-modal" class="cookie-modal" role="dialog" aria-hidden="true" aria-label="Cookie preferences">
            <div class="cookie-modal-backdrop" id="cookie-modal-backdrop" data-dismiss="true"></div>
            <div class="cookie-modal-inner" role="document">
                <button id="cookie-modal-close" class="cookie-modal-close" aria-label="Close">×</button>
                <h2>Cookie preferences</h2>
                <p>Choose which optional cookies you allow on this device. Essential cookies are always required for the site to function.</p>
                <form id="cookie-modal-form">
                    <div class="cookie-pref">
                        <label><input type="checkbox" name="analytics" id="modal-pref-analytics"> Analytics cookies (help us improve the site)</label>
                    </div>
                    <div class="cookie-pref">
                        <label><input type="checkbox" name="marketing" id="modal-pref-marketing"> Marketing cookies (personalised content/offers)</label>
                    </div>
                    <div style="margin-top:12px;display:flex;gap:8px;align-items:center;">
                        <button id="cookie-modal-save" class="cookie-btn primary">Save preferences</button>
                        <button id="cookie-modal-cancel" type="button" class="cookie-btn link">Cancel</button>
                        <span id="cookie-modal-saved" style="display:none;margin-left:10px;color:#9fbf9f;">Saved ✓</span>
                    </div>
                </form>
            </div>
        </div>
    </body>
</html>
